stages:
    - build

docker build and publish:
  stage: build
  image: docker:stable
  services:
    - docker:dind
  variables:
    DOCKER_DRIVER: overlay2
    DOCKER_HOST: tcp://docker:2375/
  before_script:
   - docker info
  script:
    - docker build -t istanbul-tessera-alpine .
    - docker images
    - echo "Pushing to remote repository"
    - docker login -u $DOCKER_ID -p $DOCKER_PASSWORD
    - docker push istanbul-tessera-alpine:latest